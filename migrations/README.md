# ì²´í˜• ë¶„ì„ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì²´í˜• ë¶„ì„ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œì…ë‹ˆë‹¤.

**ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼:**
1. `001_body_type_definitions.sql` - ì²´í˜•ë³„ ì •ì˜ ë°ì´í„° í…Œì´ë¸” ìƒì„± ë° ì´ˆê¸° ë°ì´í„° ì‚½ì…
2. `002_add_body_analysis_to_result_logs.sql` - `body_logs` í…Œì´ë¸” ìƒì„± (ì²´í˜• ë¶„ì„ ê²°ê³¼ ì €ì¥ìš©)

**ì‹¤í–‰ ìˆœì„œ:**
1. `001_body_type_definitions.sql` - ì²´í˜•ë³„ ì •ì˜ ë°ì´í„° ì¶”ê°€
2. `002_add_body_analysis_to_result_logs.sql` - `body_logs` í…Œì´ë¸” ìƒì„±

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### í…Œì´ë¸” 1: `body_type_definitions` (ì²´í˜•ë³„ ì •ì˜)

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| `id` | INT | Primary Key (ìë™ ì¦ê°€) |
| `body_feature` | VARCHAR(50) | ì²´í˜• íŠ¹ì§• (ì˜ˆ: "í‚¤ê°€ ì‘ì€ ì²´í˜•", "ê¸€ë˜ë¨¸ëŸ¬ìŠ¤í•œ ì²´í˜•") |
| `strengths` | TEXT | ì²´í˜•ì˜ ê°•ì  ì„¤ëª… |
| `style_tips` | TEXT | ìŠ¤íƒ€ì¼ íŒ |
| `recommended_dresses` | TEXT | ì¶”ì²œ ë“œë ˆìŠ¤ ìŠ¤íƒ€ì¼ |
| `avoid_dresses` | TEXT | í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤ ìŠ¤íƒ€ì¼ |
| `created_at` | TIMESTAMP | ìƒì„±ì¼ì‹œ (ìë™) |
| `updated_at` | TIMESTAMP | ìˆ˜ì •ì¼ì‹œ (ìë™) |

### í…Œì´ë¸” 2: `body_logs` (ì²´í˜• ë¶„ì„ ê²°ê³¼ ì €ì¥)

| ì»¬ëŸ¼ëª… | íƒ€ì… | NULL | ì„¤ëª… |
|--------|------|------|------|
| `idx` | INT | - | Primary Key (ìë™ ì¦ê°€) |
| `model` | VARCHAR(255) | NOT NULL | ëª¨ë¸ëª… |
| `run_time` | FLOAT | NOT NULL | ì²˜ë¦¬ ì‹œê°„ (ì´ˆ) |
| `height` | FLOAT | NOT NULL | í‚¤ (cm) |
| `weight` | FLOAT | NOT NULL | ëª¸ë¬´ê²Œ (kg) |
| `prompt` | TEXT | NOT NULL | AI ëª…ë ¹ì–´ |
| `bmi` | FLOAT | NOT NULL | ë¹„ë§Œë„ (BMI) |
| `characteristic` | TEXT | NULL | ì²´í˜• íŠ¹ì§• (ì‰¼í‘œë¡œ êµ¬ë¶„) |
| `analysis_results` | TEXT | NULL | ë¶„ì„ ê²°ê³¼ (í…ìŠ¤íŠ¸) |
| `created_at` | TIMESTAMP | - | ìƒì„±ì¼ì‹œ (ìë™) |

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ë°©ë²• 1: Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (ê¶Œì¥)

**ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:**
```bash
cd final-repo-back
python migrations/run_migration.py
```

**ê°œë³„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:**
```bash
# 001ë²ˆë§Œ ì‹¤í–‰
python -c "from migrations.run_migration import *; exec(open('migrations/001_body_type_definitions.sql').read())"

# 002ë²ˆë§Œ ì‹¤í–‰  
python -c "from migrations.run_migration import *; exec(open('migrations/002_add_body_analysis_to_result_logs.sql').read())"
```

**ì¥ì :**
- `.env` íŒŒì¼ì˜ DB ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ì½ì–´ì˜´
- ì‹¤í–‰ ê²°ê³¼ë¥¼ ìì„¸íˆ í™•ì¸ ê°€ëŠ¥
- ì—ëŸ¬ ë°œìƒ ì‹œ í•´ê²° ë°©ë²• ì œì‹œ

### ë°©ë²• 2: MySQL ëª…ë ¹ì¤„ ì‹¤í–‰

**Windows PowerShell:**
```powershell
# 001ë²ˆ ì‹¤í–‰
Get-Content migrations/001_body_type_definitions.sql | mysql -u [ì‚¬ìš©ìëª…] -p [ë°ì´í„°ë² ì´ìŠ¤ëª…]

# 002ë²ˆ ì‹¤í–‰
Get-Content migrations/002_add_body_analysis_to_result_logs.sql | mysql -u [ì‚¬ìš©ìëª…] -p [ë°ì´í„°ë² ì´ìŠ¤ëª…]
```

**Linux/Mac:**
```bash
# 001ë²ˆ ì‹¤í–‰
mysql -u [ì‚¬ìš©ìëª…] -p [ë°ì´í„°ë² ì´ìŠ¤ëª…] < migrations/001_body_type_definitions.sql

# 002ë²ˆ ì‹¤í–‰
mysql -u [ì‚¬ìš©ìëª…] -p [ë°ì´í„°ë² ì´ìŠ¤ëª…] < migrations/002_add_body_analysis_to_result_logs.sql
```

### ë°©ë²• 3: MySQL í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰

```sql
USE marryday;

-- 001ë²ˆ ì‹¤í–‰
SOURCE migrations/001_body_type_definitions.sql;

-- 002ë²ˆ ì‹¤í–‰
SOURCE migrations/002_add_body_analysis_to_result_logs.sql;
```

---

## âœ… ì‹¤í–‰ í™•ì¸

ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ í›„ í™•ì¸:

```bash
python check_db.py
```

ë˜ëŠ” MySQLì—ì„œ:

```sql
-- 001ë²ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ í™•ì¸
SHOW TABLES LIKE 'body_type_definitions';
SELECT COUNT(*) FROM body_type_definitions;
SELECT * FROM body_type_definitions;

-- 002ë²ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ í™•ì¸ (body_logs í…Œì´ë¸” í™•ì¸)
SHOW TABLES LIKE 'body_logs';
DESCRIBE body_logs;

-- ì²´í˜• ë¶„ì„ ê²°ê³¼ í™•ì¸
SELECT * FROM body_logs ORDER BY created_at DESC LIMIT 10;
```

**ì˜ˆìƒ ê²°ê³¼:**
- `body_type_definitions`: 10ê°œì˜ ì²´í˜• íŠ¹ì§• ë°ì´í„°ê°€ ì‚½ì…ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- `body_logs`: í…Œì´ë¸”ì´ ìƒì„±ë˜ê³  9ê°œì˜ ì»¬ëŸ¼ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

---

## ğŸ“Š í¬í•¨ëœ ì²´í˜•ë³„ ì •ì˜ ë°ì´í„°

### 1. í‚¤ê°€ ì‘ì€ ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: ì— íŒŒì´ì–´ ë¼ì¸
- **ìŠ¤íƒ€ì¼ íŒ**: ì‹¬í”Œí•œ ë””ìì¸ì„ ì„ íƒí•˜ë©´ í‚¤ê°€ ë” ì»¤ ë³´ì´ëŠ” íš¨ê³¼
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ê¸´ ê¸°ì¥ì˜ ë“œë ˆìŠ¤

### 2. ê¸€ë˜ë¨¸ëŸ¬ìŠ¤í•œ ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: ë¨¸ë©”ì´ë“œ
- **ìŠ¤íƒ€ì¼ íŒ**: ëª¸ë§¤ ë¼ì¸ì„ ê°•ì¡°í•˜ë©´ì„œë„ ìš°ì•„í•œ ë¶„ìœ„ê¸° ì—°ì¶œ
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ìŠ¬ë¦¼

### 3. ì–´ê¹¨ê°€ ë„“ì€ ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: Aë¼ì¸, í”„ë¦°ì„¸ìŠ¤
- **ìŠ¤íƒ€ì¼ íŒ**: ìƒì²´ëŠ” ì‹¬í”Œí•˜ê²Œ, í•˜ì²´ ë³¼ë¥¨ì„ ì£¼ëŠ” ìŠ¤íƒ€ì¼
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ìŠ¬ë¦¼

### 4. ë§ˆë¥¸ ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: í”„ë¦°ì„¸ìŠ¤
- **ìŠ¤íƒ€ì¼ íŒ**: í’ì„±í•œ ìŠ¤ì»¤íŠ¸ê°€ ì²´í˜•ì„ ë³´ì™„
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ìŠ¬ë¦¼

### 5. íŒ” ë¼ì¸ì´ ì‹ ê²½ ì“°ì´ëŠ” ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: Aë¼ì¸, ë²¨ë¼ì¸
- **ìŠ¤íƒ€ì¼ íŒ**: ìƒì²´ë¥¼ ì ë‹¹íˆ ê°ì‹¸ì£¼ëŠ” ë””ìì¸
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ìŠ¬ë¦¼

### 6. í—ˆë¦¬ê°€ ì§§ì€ ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: ë“œë¡­ ì›¨ì´ìŠ¤íŠ¸
- **ìŠ¤íƒ€ì¼ íŒ**: í—ˆë¦¬ì„ ì„ ë‚®ì¶°ì„œ í•˜ì²´ë¥¼ ê¸¸ì–´ ë³´ì´ê²Œ
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: í•˜ì´ì›¨ì´ìŠ¤íŠ¸

### 7. ë³µë¶€ê°€ ì‹ ê²½ ì“°ì´ëŠ” ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: Aë¼ì¸
- **ìŠ¤íƒ€ì¼ íŒ**: í—ˆë¦¬ì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ í¼ì§€ëŠ” ë¼ì¸
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ìŠ¬ë¦¼, ë¨¸ë©”ì´ë“œ

### 8. í‚¤ê°€ í° ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: ìŠ¬ë¦¼
- **ìŠ¤íƒ€ì¼ íŒ**: ë¯¸ë‹ˆë©€í•œ ë””ìì¸ì´ ì„¸ë ¨ëœ ì´ë¯¸ì§€ ê°•ì¡°
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ì— íŒŒì´ì–´ ë¼ì¸

### 9. ì–´ê¹¨ê°€ ì¢ì€ ì²´í˜•
- **ì¶”ì²œ ë“œë ˆìŠ¤**: í”„ë¦°ì„¸ìŠ¤, ë²¨ë¼ì¸, Aë¼ì¸
- **ìŠ¤íƒ€ì¼ íŒ**: ìƒì²´ì— ë³¼ë¥¨ì´ ì‚´ì•„ë‚˜ëŠ” ë””ìì¸, ë ˆì´ìŠ¤/ì…”ë§ ë””í…Œì¼
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: ìŠ¬ë¦¼

### 10. ì²´í˜• ì „ì²´ë¥¼ ì»¤ë²„í•˜ê³  ì‹¶ì€ ê²½ìš°
- **ì¶”ì²œ ë“œë ˆìŠ¤**: ë²¨ë¼ì¸
- **ìŠ¤íƒ€ì¼ íŒ**: ë¡œë§¨í‹±í•˜ë©´ì„œë„ ì›…ì¥í•œ ë¶„ìœ„ê¸°
- **í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤**: íŠ¹ë³„íˆ ì—†ìŒ

---

## ğŸ”„ ì¬ì‹¤í–‰

ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•´ë„ ì•ˆì „í•©ë‹ˆë‹¤.
- ê¸°ì¡´ ë°ì´í„°ë¥¼ ì‚­ì œí•œ í›„ ì¬ì‚½ì…í•˜ë¯€ë¡œ í•­ìƒ ìµœì‹  ìƒíƒœ ìœ ì§€
- í…Œì´ë¸”ì´ ì´ë¯¸ ì¡´ì¬í•´ë„ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë¨

---

## ğŸ”§ ë°ì´í„° ìˆ˜ì • ë°©ë²•

ì²´í˜•ë³„ ì •ì˜ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´:

```sql
UPDATE body_type_definitions 
SET recommended_dresses = 'ë²¨ë¼ì¸, ë¨¸ë©”ì´ë“œ, Aë¼ì¸'
WHERE body_feature = 'í‚¤ê°€ ì‘ì€ ì²´í˜•';
```

ë˜ëŠ” ìƒˆë¡œìš´ ì²´í˜• íŠ¹ì§•ì„ ì¶”ê°€í•˜ë ¤ë©´:

```sql
INSERT INTO body_type_definitions (body_feature, strengths, style_tips, recommended_dresses, avoid_dresses) 
VALUES ('ìƒˆë¡œìš´ ì²´í˜• íŠ¹ì§•', 'ê°•ì  ì„¤ëª…', 'ìŠ¤íƒ€ì¼ íŒ', 'ì¶”ì²œ ë“œë ˆìŠ¤', 'í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤');
```

---

## ğŸ“ ì‹œìŠ¤í…œ ë™ì‘ ë°©ì‹

1. **ì²´í˜• ë¶„ì„ ìš”ì²­ ì‹œ:**
   - MediaPipeë¡œ ì²´í˜• ë¼ì¸ íŒë³„ (X/A/H/O/ê· í˜•í˜•)
   - í‚¤/ëª¸ë¬´ê²Œ ì…ë ¥ â†’ BMI ê³„ì‚° â†’ ì²´í˜• íŠ¹ì§• íŒë‹¨
   - íŒë‹¨ëœ ì²´í˜• íŠ¹ì§•ë“¤ì— ëŒ€í•œ DB ì •ì˜ ì¡°íšŒ (001ë²ˆ ë§ˆì´ê·¸ë ˆì´ì…˜)
   - Gemini í”„ë¡¬í”„íŠ¸ì— í¬í•¨í•˜ì—¬ ìµœì¢… ë¶„ì„ ìˆ˜í–‰
   - **ë¶„ì„ ê²°ê³¼ë¥¼ `result_logs` í…Œì´ë¸”ì— ìë™ ì €ì¥** (002ë²ˆ ë§ˆì´ê·¸ë ˆì´ì…˜)

2. **DB ì •ì˜ í™œìš©:**
   - ì²´í˜• íŠ¹ì§•ì´ íŒë³„ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ ì •ì˜ë¥¼ ì¡°íšŒ
   - Geminiê°€ DB ì •ì˜ë¥¼ ì°¸ê³ í•˜ì—¬ ë” ì •í™•í•œ ë¶„ì„ ê²°ê³¼ ë„ì¶œ
   - ì¶”ì²œ ë“œë ˆìŠ¤ì™€ í”¼í•´ì•¼ í•  ë“œë ˆìŠ¤ ì •ë³´ ì œê³µ

3. **ë¶„ì„ ê²°ê³¼ ì €ì¥:**
   - ëª¨ë“  ì²´í˜• ë¶„ì„ ê²°ê³¼ê°€ `body_logs` í…Œì´ë¸”ì— ìë™ ì €ì¥ë¨
   - ì €ì¥ë˜ëŠ” ì •ë³´: ëª¨ë¸ëª…, ì²˜ë¦¬ ì‹œê°„, í‚¤, ëª¸ë¬´ê²Œ, AI ëª…ë ¹ì–´, BMI, ì²´í˜• íŠ¹ì§•, ë¶„ì„ ê²°ê³¼
   - `SELECT * FROM body_logs ORDER BY created_at DESC`ë¡œ ì¡°íšŒ ê°€ëŠ¥

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

- ìš´ì˜ í™˜ê²½ì—ì„œëŠ” **ë°˜ë“œì‹œ ë°±ì—… í›„ ì‹¤í–‰**í•˜ì„¸ìš”
- `.env` íŒŒì¼ì˜ DB ì—°ê²° ì •ë³´ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”
- ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ í›„ `check_db.py`ë¡œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ì—°ê²° ì˜¤ë¥˜ ë°œìƒ ì‹œ
- `.env` íŒŒì¼ì˜ `MYSQL_HOST`, `MYSQL_USER`, `MYSQL_PASSWORD`, `MYSQL_DATABASE` í™•ì¸
- MySQL ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸

### í…Œì´ë¸”ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš°
- ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ ë¬¸ì œì—†ìŒ
- ê¸°ì¡´ ë°ì´í„°ëŠ” ì‚­ì œ í›„ ì¬ì‚½ì…ë¨

### ë°ì´í„°ê°€ ë³´ì´ì§€ ì•ŠëŠ” ê²½ìš°
```sql
SELECT * FROM body_type_definitions;
```
ë¡œ ì§ì ‘ í™•ì¸í•˜ê±°ë‚˜ `check_db.py` ì‹¤í–‰

---

## ğŸ“ ë¬¸ì˜

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•˜ë©´ ê°œë°œíŒ€ì— ë¬¸ì˜í•˜ì„¸ìš”.
