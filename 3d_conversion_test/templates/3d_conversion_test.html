<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D 이미지 변환 테스트</title>
    <link rel="stylesheet" href="/static/3d_conversion.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎨 3D 이미지 변환 테스트</h1>
            <p>드레스 이미지를 3D로 변환합니다</p>
        </header>

        <main>
            <!-- 업로드 섹션 -->
            <section class="upload-section" id="uploadSection">
                <div class="card">
                    <h2>1️⃣ 이미지 업로드</h2>
                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="imageInput" accept="image/*" style="display: none;">
                        <div class="upload-placeholder" id="uploadPlaceholder">
                            <div class="upload-icon">📁</div>
                            <p>이미지를 드래그하거나 클릭하여 업로드</p>
                            <button class="btn-primary" id="uploadBtn">이미지 선택</button>
                        </div>
                        <div class="preview-container" id="previewContainer" style="display: none;">
                            <img id="previewImage" alt="Preview">
                            <div class="button-group">
                                <button class="btn-secondary" id="changeImageBtn">이미지 변경</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 변환 모드 선택 -->
            <section class="mode-section" id="modeSection" style="display: none;">
                <div class="card">
                    <h2>2️⃣ 변환 모드 선택</h2>
                    <div class="mode-grid">
                        <div class="mode-card" data-mode="depth">
                            <div class="mode-icon">🌊</div>
                            <h3>Depth Map</h3>
                            <p>깊이 정보 추출</p>
                        </div>
                        <div class="mode-card" data-mode="normal">
                            <div class="mode-icon">🎯</div>
                            <h3>Normal Map</h3>
                            <p>표면 법선 정보</p>
                        </div>
                        <div class="mode-card" data-mode="stereo">
                            <div class="mode-icon">👓</div>
                            <h3>입체 효과</h3>
                            <p>좌/우 시차 생성</p>
                        </div>
                        <div class="mode-card" data-mode="all">
                            <div class="mode-icon">✨</div>
                            <h3>전체 변환</h3>
                            <p>모든 효과 적용</p>
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" id="convertBtn" disabled>변환 시작</button>
                    </div>
                </div>
            </section>

            <!-- 로딩 섹션 -->
            <section class="loading-section" id="loadingSection" style="display: none;">
                <div class="card">
                    <div class="spinner"></div>
                    <h2>3D 변환 중...</h2>
                    <p id="loadingMessage">이미지를 분석하고 3D 정보를 생성하고 있습니다</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </section>

            <!-- 결과 섹션 -->
            <section class="result-section" id="resultSection" style="display: none;">
                <div class="card">
                    <h2>✨ 변환 완료</h2>
                    
                    <!-- 원본 이미지 -->
                    <div class="result-group">
                        <h3>원본 이미지</h3>
                        <div class="image-container">
                            <img id="originalImage" alt="Original">
                        </div>
                    </div>

                    <!-- Depth Map -->
                    <div class="result-group" id="depthMapGroup" style="display: none;">
                        <h3>Depth Map (깊이 맵)</h3>
                        <div class="image-container">
                            <img id="depthMapImage" alt="Depth Map">
                        </div>
                        <p class="description">밝은 부분이 가까운 영역, 어두운 부분이 먼 영역입니다.</p>
                    </div>

                    <!-- Normal Map -->
                    <div class="result-group" id="normalMapGroup" style="display: none;">
                        <h3>Normal Map (법선 맵)</h3>
                        <div class="image-container">
                            <img id="normalMapImage" alt="Normal Map">
                        </div>
                        <p class="description">표면의 방향 정보를 RGB 색상으로 표현했습니다.</p>
                    </div>

                    <!-- 입체 효과 -->
                    <div class="result-group" id="stereoGroup" style="display: none;">
                        <h3>입체 효과 (좌/우 이미지)</h3>
                        <div class="stereo-container">
                            <div class="stereo-image">
                                <h4>좌안 (Left)</h4>
                                <img id="leftImage" alt="Left Eye">
                            </div>
                            <div class="stereo-image">
                                <h4>우안 (Right)</h4>
                                <img id="rightImage" alt="Right Eye">
                            </div>
                        </div>
                        <p class="description">3D 안경으로 보면 입체감을 느낄 수 있습니다.</p>
                    </div>

                    <!-- 처리 정보 -->
                    <div class="info-card">
                        <h3>처리 정보</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="label">처리 시간:</span>
                                <span class="value" id="processingTime">-</span>
                            </div>
                            <div class="info-item">
                                <span class="label">이미지 크기:</span>
                                <span class="value" id="imageSize">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn-secondary" id="newConversionBtn">새로운 변환</button>
                        <button class="btn-primary" id="downloadBtn">결과 다운로드</button>
                    </div>
                </div>
            </section>

            <!-- 에러 섹션 -->
            <section class="error-section" id="errorSection" style="display: none;">
                <div class="card error-card">
                    <div class="error-icon">⚠️</div>
                    <h2>오류 발생</h2>
                    <p id="errorMessage"></p>
                    <button class="btn-primary" id="retryBtn">다시 시도</button>
                </div>
            </section>
        </main>

        <footer>
            <p>3D 이미지 변환 테스트 모듈 | Port 8003</p>
        </footer>
    </div>

    <script src="/static/3d_conversion.js"></script>
</body>
</html>

