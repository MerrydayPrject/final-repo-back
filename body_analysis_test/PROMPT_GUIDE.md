# 프롬프트 수정 가이드

체형 분석 결과의 형식을 변경하려면 `test_body_analysis.py` 파일의 `analyze_body_with_gemini` 함수 내 프롬프트를 수정하세요.

## 프롬프트 위치

**파일**: `test_body_analysis.py`  
**함수**: `analyze_body_with_gemini`  
**라인**: 약 180-193줄

## 현재 프롬프트

```python
prompt = f"""
이 이미지의 체형을 분석해주세요.

체형 정보:
- 체형 타입: {body_type.get('type', 'unknown')}
- 어깨/엉덩이 비율: {measurements.get('shoulder_hip_ratio', 1.0):.2f}
- 추정 키: {measurements.get('estimated_height', 0):.1f}cm

다음을 자연스러운 문장으로 설명해주세요:

1. 체형의 특징과 장점을 설명하세요.

2. 이 체형에 어울리는 드레스 스타일을 2-3개 구체적으로 제시하고, 각 스타일이 왜 어울리는지 이유를 설명 안에 포함하세요. 
   예: "A라인 드레스가 잘 어울리며, 그 이유는..."

3. 피해야 할 드레스 스타일을 2개 구체적으로 제시하고, 각 스타일을 피해야 하는 이유를 설명 안에 포함하세요.
   예: "H라인 드레스는 피하는 것이 좋으며, 그 이유는..."

반드시 지켜야 할 사항:
- 스타일링 팁, 액세서리 추천, 색상 추천, 코디 팁 등은 절대 포함하지 마세요.
- 추천 드레스 스타일명과 피해야 할 드레스 스타일명을 구체적으로 명시하세요.
- 별도의 리스트나 항목으로 나열하지 말고, 자연스러운 문단 형식으로 설명해주세요.
"""
```

**현재 프롬프트의 특징:**
- ✅ 추천 드레스 스타일과 피해야 할 드레스 스타일을 설명 안에 포함
- ✅ 스타일링 팁, 액세서리, 색상 추천 제외
- ✅ 별도 리스트 없이 자연스러운 문단 형식

## 프롬프트 수정 방법

### 1. 분석 항목 추가/제거

프롬프트의 "다음을 자연스러운 문장으로 설명해주세요:" 부분을 수정:

```python
다음을 자연스러운 문장으로 설명해주세요:
1. 체형의 특징과 장점
2. 이 체형에 어울리는 드레스 스타일과 그 이유
3. 피해야 할 스타일과 그 이유
4. 스타일링 팁
5. 액세서리 추천  # 새로 추가
```

### 2. 출력 형식 변경

**리스트 형식으로 받고 싶다면:**
```python
다음 항목을 리스트 형식으로 나열해주세요:
1. 체형의 특징과 장점
2. 추천 드레스 스타일 (3개)
3. 피해야 할 스타일 (2개)
```

**JSON 형식으로 받고 싶다면:**
```python
다음 정보를 JSON 형식으로 제공해주세요:
{
    "body_features": "체형의 특징과 장점",
    "recommended_styles": ["스타일1", "스타일2", "스타일3"],
    "avoid_styles": ["스타일1", "스타일2"]
}
```

### 3. 톤 변경

**친근한 톤:**
```python
친근하고 따뜻한 말투로 설명해주세요.
```

**전문적인 톤:**
```python
전문적이고 객관적인 관점에서 분석해주세요.
```

**간결한 톤:**
```python
간결하고 핵심만 담아서 설명해주세요. (3-4문단 이내)
```

### 4. 특정 스타일 강조

```python
특히 A라인 드레스와 프린세스 라인에 대해 자세히 설명해주세요.
```

### 5. 언어 변경

```python
영어로 분석 결과를 제공해주세요.
```

## 프롬프트 수정 후 확인사항

1. **서버 재시작**: 코드 변경 후 서버를 재시작해야 합니다.
2. **캐시 확인**: 브라우저 캐시를 지우거나 새로고침 하세요.
3. **테스트**: 실제 이미지로 테스트하여 결과가 원하는 형식으로 나오는지 확인하세요.

## 주의사항

- 프롬프트를 너무 길게 만들면 Gemini 응답이 느려질 수 있습니다.
- 너무 구체적인 형식을 요구하면 Gemini가 그 형식을 따르지 않을 수 있습니다.
- "중요:" 같은 강조 문구를 사용하면 원하는 형식을 더 잘 따릅니다.

## 예시: 간결한 분석 요청

```python
prompt = f"""
이 이미지의 체형을 간결하게 분석해주세요.

체형 정보: {body_type.get('type', 'unknown')}, 비율 {measurements.get('shoulder_hip_ratio', 1.0):.2f}

다음 3가지만 간단히 설명해주세요:
1. 체형 특징 (1-2문장)
2. 어울리는 스타일 (2-3개, 각각 1문장)
3. 피해야 할 스타일 (1-2개, 각각 1문장)

각 항목은 1-2문장으로 간결하게 작성해주세요.
"""
```

## 예시: 상세한 분석 요청

```python
prompt = f"""
이 이미지의 체형을 상세하게 분석해주세요.

체형 정보:
- 체형 타입: {body_type.get('type', 'unknown')}
- 어깨/엉덩이 비율: {measurements.get('shoulder_hip_ratio', 1.0):.2f}
- 추정 키: {measurements.get('estimated_height', 0):.1f}cm

다음을 자세히 설명해주세요:
1. 체형의 특징과 장점 (2-3문단)
2. 추천 드레스 스타일 3개와 각각의 이유 (각 스타일당 2-3문장)
3. 피해야 할 스타일 2개와 각각의 이유 (각 스타일당 1-2문장)
4. 스타일링 팁과 액세서리 추천 (2-3문단)

각 섹션을 명확하게 구분하여 작성해주세요.
"""
```

## 수정 후 서버 재시작

프롬프트를 수정한 후:

```bash
# 서버 중지 (Ctrl+C)
# 서버 재시작
python test_body_analysis.py 8002
```

또는 배치 파일 사용:
```bash
start_test_server_8002.bat
```

